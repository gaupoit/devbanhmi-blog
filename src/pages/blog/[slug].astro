---
import PostLayout from '../../layouts/PostLayout.astro';
import { getPostBySlug, getAllPostSlugs } from '../../lib/wordpress';

export async function getStaticPaths() {
  const slugs = await getAllPostSlugs();
  return slugs.map((slug) => ({ params: { slug } }));
}

const { slug } = Astro.params;
const post = await getPostBySlug(slug!);

if (!post) {
  return Astro.redirect('/404');
}
---

<PostLayout post={post} />
